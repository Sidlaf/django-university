<!DOCTYPE html>
<html>
<head>
    <title>Система учета успеваемости</title>
</head>
<body>
    <h1>Успеваемость студентов</h1>

    <h2>Таблица оценок</h2>
    <table>
        <thead>
            <tr>
                <th>ФИО студента</th>
                {% for subject in subjects %}
                    <th>{{ subject }}</th>
                {% endfor %}
                <th>Средний балл</th>
            </tr>
        </thead>
        <tbody>
            {% for student in student_statistics %}
                <tr>
                    <td>{{ student.student.fio }}</td>
                    {% for score in student.scores %}
                        <td>{{ score }}</td>
                    {% endfor %}
                    <td>{{ student.average }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Статистика</h2>
    <p>Лучший студент: {{ best_student }}</p>
    <p>Худший студент: {{ worst_student }}</p>

    <h2>Средние баллы по предметам</h2>
    <table>
        <thead>
            <tr>
                <th>Предмет</th>
                <th>Средний балл</th>
            </tr>
        </thead>
        <tbody>
            {% for subject, average in subject_averages.items %}
                <tr>
                    <td>{{ subject }}</td>
                    <td>{{ average|floatformat:1 }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Управление</h2>
    <a href="{% url 'student_create' %}">Добавить студента</a><br>
    <a href="{% url 'subject_create' %}">Добавить предмет</a><br>
    <a href="{% url 'score_create' %}">Добавить оценку</a><br>

</body>
</html>